<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/logos/main-logo.png">
  <link rel="icon" type="image/png" href="../assets/img/logos/main-logo.png">
  <title>
    NFT Click | Dashboard
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/3d17848b75.js" crossorigin="anonymous"></script>
  <!-- Font Awesome Icons -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <!-- CSS Files -->
  <link rel="stylesheet" href="assets/css/custom.css">
  <link id="pagestyle" href="../assets/css/soft-ui-dashboard.css?v=1.0.3" rel="stylesheet" />
</head>

<body class="g-sidenav-show  bg-gray-100">
  <main class="main-content position-relative max-height-vh-100 mt-1 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-bg navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="py-1 ">
        <div class="collapse position-relative navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <nav aria-label="breadcrumb">
            <div class="nav">
              <a href="/">
                <img class="app-logo" src="assets/img/logos/logo.png" alt="Logo">
                <span class="font-weight-bolder mb-0 text-dark">NFT Click</span>
              </a>
            </div>
            </nav>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->

    <!-- Main Content -->
    <div class="container-fluid py-4">
       <br>
       <%  if(typeof alert != 'undefined'){  %>

           <div class="alert alert-<%= alert.alertType %> alert-dismissible fade show" role="alert">
             <span> <%= alert.alert %> </span>
             <button type="button" class="btn-close text-dark" data-bs-dismiss="alert" aria-label="Close">&times</button>
           </div>

       <%  } %>
      <% if(user.status == 'Free'){ %>
         <!-- Normal Package Details -->
         <div class="card card-body blur shadow-blur mx-2 overflow-hidden">
           <label class="text-center">Current package: <%=user.status %> </label>
           <hr>
           <h5 class="text-center mt-4 text-dark">Premium package</h5>
           <p class="text-left text-center font-weight-bold  line-height-start line-height text-dark text-sm">Complete transaction and enter the transaction ID </p>
           <div class="row">
            <div class="text-center">
              <img class="text-center scanner_img" id="qrcode" alt="">
            </div>
            <p class="text-left text-center line-height-start line-height text-sm">Scan the QR code and complete the transaction </p>
            <form class="" action="/activate" method="post">
               <div class="d-grid gap-2 col-10 mx-auto">
                   <input type="text" class="form-control" name="transaction_id" placeholder="Enter transaction ID">
                 <div class="ps-7">
                   <button type="submit" class="btn  btn-danger">Subscribe</button>
                 </div>
               </div>
             </form>
           </div>
         </div>
         <br>
    <%   } %>
    <%   if(user.status == 'Premium'){ %>
         <!-- Next package Details -->
         <div class="card card-body blur shadow-blur mx-2 overflow-hidden">
           <label class="text-center">Current package: <%=user.status %> </label>
           <hr>
           <h5 class="text-center mt-4 text-dark">Premium package</h5>
            <div class="text-center">
              <img class="text-center scanner_img" id="qrcode" alt="">
            </div>
           <p class="text-left text-center font-weight-bold  line-height-start line-height text-dark text-sm">Complete transaction and enter the transaction ID </p>
           <div class="row">
             <form class="" action="/activate" method="post">
               <div class="d-grid gap-2 col-10 mx-auto">
                   <input type="text" class="form-control" name="transaction_id" placeholder="Enter transaction ID">
                 <div class="ps-7">
                   <button type="submit" disabled class="btn  btn-danger">Active</button>
                 </div>
               </form>
               </div>
           </div>
         </div>
         <br>
    <%   } %>


       <br><br><br><br>

     </div>
  </main>
  <div class="fixed-plugin">
    <a class="fixed-plugin-button-left  text-dark position-fixed px-3 py-2" href="/">
      <i class="fa fa-home py-2"> </i>
    </a>

    <a class="fixed-plugin-button-center-active text-primary position-fixed px-3 py-2" href="/package">
      <i class="fa fa-infinity py-2"> </i>
      <span class="active-plan">Package</span>
    </a>
    <a class="fixed-plugin-button-right position-fixed px-3 py-2" href="/profile">
      <i class="fa fa-user py-2"> </i>
    </a>


  </div>
  <!--   Core JS Files   -->
  <script src="assets/vendor/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/chartjs.min.js"></script>

  <script>
     async function fetchQR() {
        try {
            const response = await fetch(`/generateQR`);
            const data = await response.json();
            document.getElementById('qrcode').src = data.url;
        } catch (error) {
            console.error("Error fetching QR Code:", error);
        }
    }

    window.addEventListener("load", fetchQR);
  </script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/soft-ui-dashboard.min.js?v=1.0.3"></script>